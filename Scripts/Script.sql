
CREATE GENERATOR GEN_CLIENTES_ID;

CREATE TABLE CLIENTES (
    CODIGO         INTEGER NOT NULL,
    NOME           VARCHAR(200) NOT NULL,
    TIPO_PESSOA    VARCHAR(1) NOT NULL,
    CPF_CNPJ       VARCHAR(20) NOT NULL,
    RG_IE          VARCHAR(100),
    DATA_CADASTRO  TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    ATIVO          CHAR(1) DEFAULT 'S'
);

ALTER TABLE CLIENTES ADD CONSTRAINT PK_CLIENTES PRIMARY KEY (CODIGO);

/* Trigger: CLIENTES_BI */
CREATE TRIGGER CLIENTES_BI FOR CLIENTES
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if (new.codigo is null) then
    new.codigo = gen_id(gen_clientes_id,1);
end;


CREATE TABLE CLIENTE_FONE (
    COD_CLIENTE  INTEGER NOT NULL,
    TELEFONE     VARCHAR(25) NOT NULL,
    OBSERVACAO   VARCHAR(100)
);

ALTER TABLE CLIENTE_FONE ADD CONSTRAINT PK_CLIENTE_FONE PRIMARY KEY (COD_CLIENTE, TELEFONE);
ALTER TABLE CLIENTE_FONE ADD CONSTRAINT FK_CLIENTE_FONE_1 FOREIGN KEY (COD_CLIENTE) REFERENCES CLIENTES (CODIGO);


/******************************************************************************/
/****              Generated by IBExpert 05/10/2022 15:27:37               ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES NONE;

CREATE TABLE CLIENTE_ENDERECO (
    COD_CLIENTE  INTEGER NOT NULL,
    CEP          VARCHAR(25) NOT NULL,
    LOGRADOURO   VARCHAR(100),
    NUMERO       VARCHAR(10),
    BAIRRO       VARCHAR(100),
    CIDADE       VARCHAR(100),
    PAIS         VARCHAR(100),
    ESTADO       VARCHAR(2)
);

ALTER TABLE CLIENTE_ENDERECO ADD CONSTRAINT PK_CLIENTE_ENDERECO PRIMARY KEY (COD_CLIENTE, CEP);
ALTER TABLE CLIENTE_ENDERECO ADD CONSTRAINT FK_CLIENTE_ENDERECO_1 FOREIGN KEY (COD_CLIENTE) REFERENCES CLIENTES (CODIGO);

